!function(){"use strict";(e=>{const t="single-filez-lazy-load",n="single-filez-load-image",i="single-filez-image-loaded",r="single-filez-new-font-face",o={family:"font-family",style:"font-style",weight:"font-weight",stretch:"font-stretch",unicodeRange:"unicode-range",variant:"font-variant",featureSettings:"font-feature-settings"},l=(t,n,i)=>e.addEventListener(t,n,i),s=t=>{try{e.dispatchEvent(t)}catch(e){}},c=e.CustomEvent,d=e.document,a=e.screen,g=e.Element,f=e.UIEvent,_=e.Event,m=e.FileReader,u=e.Blob,h=e.console,y=e.JSON,p=h&&h.warn&&((...e)=>h.warn(...e))||(()=>{}),F=new Map,E=new Map;let w;function v(r){const o=d.scrollingElement||d.documentElement,l=o.clientHeight,f=o.clientWidth,m=Math.max(o.scrollHeight-l,l),u=Math.max(o.scrollWidth-f,f);if(d.querySelectorAll("[loading=lazy]").forEach((e=>{e.loading="eager",e.setAttribute(t,"")})),o.__defineGetter__("clientHeight",(()=>m)),o.__defineGetter__("clientWidth",(()=>u)),a.__defineGetter__("height",(()=>m)),a.__defineGetter__("width",(()=>u)),e._singleFile_innerHeight=e.innerHeight,e._singleFile_innerWidth=e.innerWidth,e.__defineGetter__("innerHeight",(()=>m)),e.__defineGetter__("innerWidth",(()=>u)),r||e._singleFile_getBoundingClientRect||(e._singleFile_getBoundingClientRect=g.prototype.getBoundingClientRect,g.prototype.getBoundingClientRect=function(){const t=e._singleFile_getBoundingClientRect.call(this);return this==o&&(t.__defineGetter__("height",(()=>m)),t.__defineGetter__("bottom",(()=>m+t.top)),t.__defineGetter__("width",(()=>u)),t.__defineGetter__("right",(()=>u+t.left))),t}),!e._singleFileImage){const t=e.Image;e._singleFileImage=e.Image,e.__defineGetter__("Image",(function(){return function(){const e=new t(...arguments),r=new t(...arguments);return r.__defineSetter__("src",(t=>{e.src=t,s(new c(n,{detail:e.src}))})),r.__defineGetter__("src",(()=>e.src)),r.__defineSetter__("srcset",(t=>{s(new c(n)),e.srcset=t})),r.__defineGetter__("srcset",(()=>e.srcset)),r.__defineGetter__("height",(()=>e.height)),r.__defineGetter__("width",(()=>e.width)),r.__defineGetter__("naturalHeight",(()=>e.naturalHeight)),r.__defineGetter__("naturalWidth",(()=>e.naturalWidth)),e.decode&&r.__defineGetter__("decode",(()=>()=>e.decode())),e.onload=e.onloadend=e.onerror=t=>{s(new c(i,{detail:e.src})),r.dispatchEvent(new _(t.type,t))},r}}))}let h,y;r?(h=l/m,y=f/u):(h=(l+e.scrollY)/m,y=(f+e.scrollX)/u);const p=Math.min(h,y);if(p<1){const e=d.documentElement.style.getPropertyValue("transform"),t=d.documentElement.style.getPropertyPriority("transform"),n=d.documentElement.style.getPropertyValue("transform-origin"),i=d.documentElement.style.getPropertyPriority("transform-origin"),o=d.documentElement.style.getPropertyValue("min-height"),l=d.documentElement.style.getPropertyPriority("min-height");d.documentElement.style.setProperty("transform-origin",(h<1?"50%":"0")+" "+(y<1?"50%":"0")+" 0","important"),d.documentElement.style.setProperty("transform","scale3d("+p+", "+p+", 1)","important"),d.documentElement.style.setProperty("min-height",100/p+"vh","important"),B(),r?(d.documentElement.style.setProperty("-sf-transform",e,t),d.documentElement.style.setProperty("-sf-transform-origin",n,i),d.documentElement.style.setProperty("-sf-min-height",o,l)):(d.documentElement.style.setProperty("transform",e,t),d.documentElement.style.setProperty("transform-origin",n,i),d.documentElement.style.setProperty("min-height",o,l))}if(!r){B();const e=o.getBoundingClientRect();window==window.top&&[...F].forEach((([t,n])=>{const i=n.options&&n.options.root&&n.options.root.getBoundingClientRect,r=i&&n.options.root.getBoundingClientRect(),o=E.get(t);if(o){const l=o.map((t=>{const n=t.getBoundingClientRect();return{target:t,intersectionRatio:1,boundingClientRect:n,intersectionRect:n,isIntersecting:!0,rootBounds:i?r:e,time:0}}));n.callback(l,t)}}))}}function P(n){d.querySelectorAll("["+t+"]").forEach((e=>{e.loading="lazy",e.removeAttribute(t)})),n||e._singleFile_getBoundingClientRect&&(g.prototype.getBoundingClientRect=e._singleFile_getBoundingClientRect,delete e._singleFile_getBoundingClientRect),e._singleFileImage&&(delete e.Image,e.Image=e._singleFileImage,delete e._singleFileImage),n||B()}function b(){const t=d.scrollingElement||d.documentElement;null!=e._singleFile_innerHeight&&(delete e.innerHeight,e.innerHeight=e._singleFile_innerHeight,delete e._singleFile_innerHeight),null!=e._singleFile_innerWidth&&(delete e.innerWidth,e.innerWidth=e._singleFile_innerWidth,delete e._singleFile_innerWidth),delete t.clientHeight,delete t.clientWidth,delete a.height,delete a.width}if(l("single-filez-load-deferred-images-start",(()=>v())),l("single-filez-load-deferred-images-keep-zoom-level-start",(()=>v(!0))),l("single-filez-load-deferred-images-end",(()=>P())),l("single-filez-load-deferred-images-keep-zoom-level-end",(()=>P(!0))),l("single-filez-load-deferred-images-reset",b),l("single-filez-load-deferred-images-keep-zoom-level-reset",(()=>{const e=d.documentElement.style.getPropertyValue("-sf-transform"),t=d.documentElement.style.getPropertyPriority("-sf-transform"),n=d.documentElement.style.getPropertyValue("-sf-transform-origin"),i=d.documentElement.style.getPropertyPriority("-sf-transform-origin"),r=d.documentElement.style.getPropertyValue("-sf-min-height"),o=d.documentElement.style.getPropertyPriority("-sf-min-height");d.documentElement.style.setProperty("transform",e,t),d.documentElement.style.setProperty("transform-origin",n,i),d.documentElement.style.setProperty("min-height",r,o),d.documentElement.style.removeProperty("-sf-transform"),d.documentElement.style.removeProperty("-sf-transform-origin"),d.documentElement.style.removeProperty("-sf-min-height"),b()})),l("single-filez-dispatch-scroll-event-start",(()=>{w=!0})),l("single-filez-dispatch-scroll-event-end",(()=>{w=!1})),l("single-filez-block-cookies-start",(()=>{try{d.__defineGetter__("cookie",(()=>{throw new Error("document.cookie temporary blocked by SingleFile")}))}catch(e){}})),l("single-filez-block-cookies-end",(()=>{delete d.cookie})),l("single-filez-block-storage-start",(()=>{e._singleFile_localStorage||(e._singleFile_localStorage=e.localStorage,e.__defineGetter__("localStorage",(()=>{throw new Error("localStorage temporary blocked by SingleFileZ")}))),e._singleFile_indexedDB||(e._singleFile_indexedDB=e.indexedDB,e.__defineGetter__("indexedDB",(()=>{throw new Error("indexedDB temporary blocked by SingleFileZ")})))})),l("single-filez-block-storage-end",(()=>{e._singleFile_localStorage&&(delete e.localStorage,e.localStorage=e._singleFile_localStorage,delete e._singleFile_localStorage),e._singleFile_indexedDB||(delete e.indexedDB,e.indexedDB=e._singleFile_indexedDB,delete e._singleFile_indexedDB)})),l("single-filez-request-fetch",(async t=>{s(new c("single-filez-ack-fetch"));const{url:n,options:i}=y.parse(t.detail);let r;try{const t=await((t,n)=>e.fetch(t,n))(n,i);r={url:n,response:await t.arrayBuffer(),headers:[...t.headers],status:t.status}}catch(e){r={url:n,error:e&&e.toString()}}s(new c("single-filez-response-fetch",{detail:r}))})),e.FontFace){const t=e.FontFace;let n;e.FontFace=function(){return n||(p("SingleFileZ is hooking the FontFace constructor, document.fonts.delete and document.fonts.clear to handle dynamically loaded fonts."),n=!0),z(...arguments).then((e=>s(new c(r,{detail:e})))),new t(...arguments)},e.FontFace.toString=function(){return"function FontFace() { [native code] }"};const i=d.fonts.delete;d.fonts.delete=function(e){return z(e.family).then((e=>s(new c("single-filez-delete-font",{detail:e})))),i.call(d.fonts,e)},d.fonts.delete.toString=function(){return"function delete() { [native code] }"};const o=d.fonts.clear;d.fonts.clear=function(){return s(new c("single-filez-clear-fonts")),o.call(d.fonts)},d.fonts.clear.toString=function(){return"function clear() { [native code] }"}}if(e.IntersectionObserver){const t=e.IntersectionObserver;let n;e.IntersectionObserver=function(){n||(p("SingleFileZ is hooking the IntersectionObserver API to detect and load deferred images."),n=!0);const e=new t(...arguments),i=t.prototype.observe||e.observe,r=t.prototype.unobserve||e.unobserve,o=arguments[0],l=arguments[1];return i&&(e.observe=function(t){let n=E.get(e);return n||(n=[],E.set(e,n)),n.push(t),i.call(e,t)}),r&&(e.unobserve=function(t){let n=E.get(e);return n&&(n=n.filter((e=>e!=t)),n.length?E.set(e,n):(E.delete(e),F.delete(e))),r.call(e,t)}),F.set(e,{callback:o,options:l}),e},e.IntersectionObserver.prototype=t.prototype,e.IntersectionObserver.toString=function(){return"function IntersectionObserver() { [native code] }"}}async function z(e,t,n){const i={};return i["font-family"]=e,i.src=t,n&&Object.keys(n).forEach((e=>{o[e]&&(i[o[e]]=n[e])})),new Promise((e=>{if(i.src instanceof ArrayBuffer){const t=new m;t.readAsDataURL(new u([i.src])),t.addEventListener("load",(()=>{i.src="url("+t.result+")",e(i)}))}else e(i)}))}function B(){try{s(new f("resize")),w&&s(new f("scroll"))}catch(e){}}})("object"==typeof globalThis?globalThis:window)}();
